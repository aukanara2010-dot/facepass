# Быстрая инструкция по переиндексации

## Проблема
В локальной векторной базе только 3 записи, а в облаке 13 фото. Поиск работает неполно.

## Решение

### 1. Установить зависимости (если нужно)
```bash
pip install requests==2.31.0
```

### 2. Запустить переиндексацию
```bash
# Через curl
curl -X POST "http://localhost:8000/api/v1/faces/force-reindex-session/f1896ee0-d548-4676-a0a5-02ac09e6aad9"

# Или через тестовый скрипт
python test_force_reindex.py f1896ee0-d548-4676-a0a5-02ac09e6aad9
```

### 3. Проверить результат
Эндпоинт покажет:
- Сколько фото найдено в облаке
- Сколько уже было проиндексировано
- Сколько новых фото обработано
- Какие ошибки возникли

### 4. Проверить поиск
После переиндексации поиск должен работать по всем 13 фото вместо 3.

## Что делает эндпоинт
1. Берет все фото из облачной базы (155.212.216.176)
2. Проверяет, какие уже есть в локальной векторной базе
3. Скачивает недостающие фото
4. Создает эмбеддинги лиц
5. Сохраняет в локальную базу

## Логи
Процесс выводит подробные логи:
```
Обработка фото 4 из 13: photo_004.jpg
✅ Фото photo_004.jpg успешно обработано (confidence: 0.823)
```

Если фото не может быть обработано, будет показана причина (битая ссылка, нет лица, неверный формат).
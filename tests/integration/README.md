# Интеграционные тесты

Эти тесты проверяют взаимодействие между различными компонентами системы.

## Файлы

### Основные интеграционные тесты
- `test_auto_indexing_flow.py` - Полный цикл автоматической индексации фотографий
- `test_frontend_backend_integration.py` - Интеграция фронтенда и бэкенда
- `test_pixora_integration.py` - Интеграция с внешней базой данных Pixora

### Тесты исправлений
- `test_database_fields_fix.py` - Проверка исправления полей базы данных
- `test_indexing_timeouts.py` - Тест таймаутов при индексации

### Тесты S3 и хранилища
- `test_real_s3_indexing.py` - Тест индексации с реальным S3

### Тесты сессий
- `test_session_api.py` - API для работы с сессиями
- `test_session_endpoints_simple.py` - Простые тесты эндпоинтов сессий
- `test_session_model.py` - Модель сессий

## Требования

Для запуска интеграционных тестов необходимо:

1. **База данных PostgreSQL**
   - Основная база Pixora
   - Векторная база для эмбеддингов

2. **S3 хранилище**
   - Доступ к Beget S3
   - Тестовые фотографии

3. **Переменные окружения**
   - `.env` файл с правильными настройками
   - Доступы к базам данных и S3

## Запуск

```bash
# Все интеграционные тесты
pytest tests/integration/

# Конкретный тест
pytest tests/integration/test_auto_indexing_flow.py -v

# С подробным выводом
pytest tests/integration/ -v -s
```

## Особенности

- Тесты могут быть медленными (работа с реальными сервисами)
- Требуют правильной конфигурации окружения
- Могут изменять данные в тестовых базах
- Некоторые тесты требуют InsightFace модели
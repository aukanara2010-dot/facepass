# =============================================================================
# FacePass Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env file to version control!
#
# FacePass v2.0 - Isolated Microservice Architecture
# This service provides face recognition search functionality without external
# database dependencies. All face embeddings are stored in PostgreSQL with pgvector.

# =============================================================================
# Application Settings
# =============================================================================
# Application name
APP_NAME=FacePass

# Application version
APP_VERSION=2.0.0

# Enable debug mode (set to False in production)
DEBUG=False

# =============================================================================
# PostgreSQL Database Configuration (with pgvector extension)
# =============================================================================
# Database username
POSTGRES_USER=facepass_user

# Database password (use strong password in production!)
POSTGRES_PASSWORD=your_secure_password_here

# Database name
POSTGRES_DB=facepass_vector

# Database host (use service name from docker-compose, or IP/hostname for external DB)
POSTGRES_HOST=db_vector

# Database port
POSTGRES_PORT=5432

# =============================================================================
# Redis Configuration (for caching and Celery)
# =============================================================================
# Redis host (use service name from docker-compose, or IP/hostname for external Redis)
REDIS_HOST=redis

# Redis port
REDIS_PORT=6379

# Redis database number (0-15)
REDIS_DB=0

# =============================================================================
# Celery Configuration (optional - defaults to Redis if not set)
# =============================================================================
# Celery broker URL (leave empty to use Redis URL)
CELERY_BROKER_URL=

# Celery result backend URL (leave empty to use Redis URL)
CELERY_RESULT_BACKEND=

# =============================================================================
# S3 Storage Configuration
# =============================================================================
# S3 endpoint URL (e.g., https://s3.beget.com or AWS S3 endpoint)
S3_ENDPOINT=https://s3.beget.com

# S3 access key ID
S3_ACCESS_KEY=your_s3_access_key_here

# S3 secret access key
S3_SECRET_KEY=your_s3_secret_key_here

# S3 bucket name for storing face images
S3_BUCKET=facepass-images

# S3 region (e.g., ru-1 for Beget, us-east-1 for AWS)
S3_REGION=ru-1

# =============================================================================
# API Authentication
# =============================================================================
# Comma-separated list of valid API keys for protected endpoints
# Generate strong random keys for production!
# Example: API_KEYS=key1_abc123,key2_def456,key3_ghi789
API_KEYS=

# =============================================================================
# CORS Configuration
# =============================================================================
# Comma-separated list of allowed CORS origins
# Add your frontend domains here
# Example: CORS_ORIGINS=https://example.com,https://app.example.com
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# =============================================================================
# Face Recognition Settings
# =============================================================================
# Minimum confidence threshold for face detection (0.0-1.0)
# Lower values detect more faces but may include false positives
FACE_DETECTION_THRESHOLD=0.6

# Minimum similarity threshold for face matching (0.0-1.0)
# Higher values return only very similar faces, lower values return more matches
# Recommended: 0.5-0.7 for general use
FACE_SIMILARITY_THRESHOLD=0.5

# Dimension of face embedding vectors (default: 512 for InsightFace ArcFace)
# Do not change unless using a different face recognition model
EMBEDDING_DIMENSION=512

# =============================================================================
# Notes
# =============================================================================
# 1. Database Migration: Run scripts/migration_v2.sql to migrate existing data
# 2. API Keys: Generate strong random keys for production (e.g., using openssl rand -hex 32)
# 3. CORS Origins: Add all domains that will access the FacePass API
# 4. S3 Storage: Ensure bucket exists and has proper permissions
# 5. Face Thresholds: Adjust based on your use case and testing results
